@model Web.Models.Product
@{
    ViewData["Title"] = "Thanh toán";
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}

<div class="container py-4">
    <h2 class="mb-4 text-center">Thanh toán</h2>

    @if (TempData["Message"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["Message"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow-sm">
                <div class="row g-0">
                    <div class="col-md-5 p-3">
                        <div class="product-image-container h-100 d-flex align-items-center justify-content-center">
                            <img src="@(Model.ImageUrl ?? "/images/default-product.jpg")"
                                 class="img-fluid rounded"
                                 alt="@Model.Name"
                                 style="max-height: 300px; object-fit: cover;">
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="card-body h-100 d-flex flex-column">
                            <div class="flex-grow-1">
                                <h4 class="card-title mb-3">@Model.Name</h4>
                                <div class="product-details">
                                    <p class="mb-2">
                                        <strong>Danh mục:</strong>
                                        @(Model.Category?.Name ?? "Không có danh mục")
                                    </p>
                                    <p class="mb-2">
                                        <strong>Giá:</strong>
                                        <span class="text-primary fw-bold">@Model.Price.ToString("N0") VNĐ</span>
                                    </p>
                                    <p class="text-muted">
                                        <strong>Mô tả:</strong>
                                        @Model.Description
                                    </p>
                                </div>
                            </div>

                            <div class="order-summary mt-3">
                                <h5 class="mb-3">Tóm tắt đơn hàng</h5>
                                <div class="border-top pt-3">
                                    <p class="d-flex justify-content-between mb-2">
                                        <span>Sản phẩm:</span>
                                        <span>@Model.Name</span>
                                    </p>
                                    <p class="d-flex justify-content-between mb-2">
                                        <span>Số lượng:</span>
                                        <span>1</span>
                                    </p>
                                    <p class="d-flex justify-content-between mb-3 fw-bold">
                                        <span>Tổng giá:</span>
                                        <span class="text-primary">@Model.Price.ToString("N0") VNĐ</span>
                                    </p>
                                </div>

                                <form asp-action="ProcessPayment" method="post" class="mt-3">
                                    <input type="hidden" name="productId" value="@Model.Id" />
                                    <div class="d-grid gap-2">
                                        <button type="submit" class="btn btn-primary btn-lg">
                                            Thanh toán ngay
                                        </button>
                                        <a href="@Url.Action("Index", "Home")" class="btn btn-outline-secondary btn-lg">
                                            Quay lại
                                        </a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .product-image-container {
        background-color: #f8f9fa;
        border-radius: 0.375rem;
    }

    .card {
        border: none;
        border-radius: 0.5rem;
        overflow: hidden;
    }

    .product-details strong {
        color: #495057;
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
        transition: all 0.3s ease;
    }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }
</style>